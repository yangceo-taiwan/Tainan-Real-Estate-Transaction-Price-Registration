<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025å°å—æˆ¿å¸‚è¶¨å‹¢å ±å‘Š</title>
    
    <!-- æ ¸å¿ƒåº« -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prop-types/15.8.1/prop-types.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.12.7/Recharts.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f8fafc; }
        
        .gradient-header {
            background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 100%);
        }
        
        /* æŒ‰éˆ•å…‰æšˆå‹•ç•« */
        .btn-glow {
            animation: glow 2s infinite;
        }
        @keyframes glow {
            0% { box-shadow: 0 0 5px rgba(59, 130, 246, 0.5); }
            50% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.8); }
            100% { box-shadow: 0 0 5px rgba(59, 130, 246, 0.5); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // ---------------------------------------------------------
        // ğŸ‘‡ è¨­å®šå€åŸŸ
        // ---------------------------------------------------------
        
        // 1. Line ç¤¾ç¾¤é€£çµ
        const LINE_GROUP_URL = "https://line.me/ti/g2/aVklWxyLP1RtfstQsslGQOlP4KViuFI7PPucdQ?utm_source=invitation&utm_medium=link_copy&utm_campaign=default";
        
        // 2. å®Œæ•´å ±å‘Šçš„é€£çµ (å¦‚æœæ‚¨ä¹‹å¾Œæœ‰é›²ç«¯é€£çµï¼Œå¯ä»¥å¡«å…¥å¼•è™Ÿå…§ï¼Œä¾‹å¦‚ "https://drive.google.com/...")
        // å¦‚æœç•™ç©º ""ï¼ŒæŒ‰éˆ•æœƒè‡ªå‹•è®Šæˆã€Œå¼•å°åŠ å…¥ç¤¾ç¾¤é ˜å–ã€çš„æ¨¡å¼
        const REPORT_URL = ""; 

        // ---------------------------------------------------------

        const { useState } = React;
        const { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, LabelList } = Recharts;

        const TainanHousingChart = () => {
            const data = [
                { 
                    name: 'æ±å€', min: 28, max: 69.7, range: [28, 69.7], type: 'å¸‚å€', fill: '#4f46e5',
                    features: ['å—ç´¡è³¼ç‰©ä¸­å¿ƒ', 'å¹³å¯¦è½‰é‹ç«™', 'æ˜æ˜Ÿå­¸å€æ—ç«‹']
                },
                { 
                    name: 'åŒ—å€', min: 34, max: 63.1, range: [34, 63.1], type: 'å¸‚å€', fill: '#7c3aed',
                    features: ['é„­å­å¯®é‡åŠƒå€', 'Costcoå•†åœˆ', 'èŠ±åœ’å¤œå¸‚']
                },
                { 
                    name: 'ä¸­è¥¿å€', min: 30, max: 57, range: [30, 57], type: 'å¸‚å€', fill: '#db2777',
                    features: ['æ–°å…‰ä¸‰è¶Šæ–°å¤©åœ°', 'ç¾è¡“é¤¨/æ²³æ¨‚å»£å ´', 'è§€å…‰ç†±é»']
                },
                { 
                    name: 'å®‰å¹³', min: 20, max: 48, range: [20, 48], type: 'å¸‚å€', fill: '#0891b2',
                    features: ['å¸‚æ”¿ä¸­å¿ƒ', 'äºæœéŠè‰‡åŸ', 'äº”æœŸé‡åŠƒå€']
                },
                { 
                    name: 'æ­¸ä»(é«˜éµ)', min: 24, max: 54.1, range: [24, 54.1], type: 'éƒŠå€', fill: '#d97706',
                    features: ['é«˜éµå°å—ç«™', 'ä¸‰äº•Outlet', 'æ²™å´™ç¶ èƒ½ç§‘å­¸åŸ']
                },
                { 
                    name: 'æ°¸åº·', min: 25, max: 53.9, range: [25, 53.9], type: 'éƒŠå€', fill: '#059669',
                    features: ['æ–°ç¸½åœ–/æ±æ©‹', 'é¹½è¡Œé‡åŠƒå€', 'ç ²æ ¡é·ç§»è­°é¡Œ']
                },
                { 
                    name: 'å–„åŒ–/æ–°å¸‚', min: 26, max: 52.6, range: [26, 52.6], type: 'éƒŠå€', fill: '#65a30d',
                    features: ['å—ç§‘åœ’å€æ ¸å¿ƒ', 'LMç‰¹å€', 'å°ç©é›»æ•ˆæ‡‰']
                },
                { 
                    name: 'å®‰å—', min: 25, max: 49, range: [25, 49], type: 'éƒŠå€', fill: '#2563eb',
                    features: ['å•†60å‰¯éƒ½å¿ƒ', 'ä¹ä»½å­ä½ç¢³å€', 'åŒ—å¤–ç’°é“è·¯']
                },
            ];

            const handleViewReport = () => {
                if (REPORT_URL) {
                    // å¦‚æœæœ‰å¡«é€£çµï¼Œå°±æ‰“é–‹é€£çµ
                    window.open(REPORT_URL, '_blank');
                } else {
                    // å¦‚æœæ²’å¡«é€£çµï¼Œå°±é¡¯ç¤ºæç¤ºè¦–çª—ï¼Œå¼•å°å»ç¤¾ç¾¤
                    const confirmJoin = window.confirm("å®Œæ•´ PDF å ±å‘Šå·²æ”¾åœ¨ç¤¾ç¾¤æª”æ¡ˆå€ã€‚\n\næ˜¯å¦ç«‹å³åŠ å…¥ç¤¾ç¾¤å…è²»ä¸‹è¼‰ï¼Ÿ");
                    if (confirmJoin) {
                        window.open(LINE_GROUP_URL, '_blank');
                    }
                }
            };

            const handleJoinGroup = () => {
                window.open(LINE_GROUP_URL, '_blank');
            };

            // è‡ªå®šç¾© Tooltip
            const CustomTooltip = ({ active, payload, label }) => {
                if (active && payload && payload.length) {
                    const d = payload[0].payload;
                    return (
                        <div className="bg-white/95 p-4 rounded-xl shadow-2xl border border-slate-200 text-sm max-w-[200px] z-50">
                            <div className="flex justify-between items-center mb-2 border-b border-slate-100 pb-2">
                                <span className="font-bold text-lg text-slate-800">{label}</span>
                                <span className={`text-xs px-2 py-0.5 rounded text-white ${d.type === 'å¸‚å€' ? 'bg-indigo-500' : 'bg-green-500'}`}>{d.type}</span>
                            </div>
                            <div className="flex justify-between mb-1">
                                <span className="text-slate-500">æœ€é«˜åƒ¹</span>
                                <span className="font-bold text-red-500">{d.max} è¬/åª</span>
                            </div>
                            <div className="flex justify-between mb-3">
                                <span className="text-slate-500">åœ°æ¿åƒ¹</span>
                                <span className="font-bold text-green-600">{d.min} è¬/åª</span>
                            </div>
                            <div className="bg-slate-50 p-2 rounded-lg">
                                <p className="text-xs font-bold text-slate-500 mb-1">ğŸ”¥ å€åŸŸäº®é»</p>
                                <ul className="list-disc list-inside text-xs text-slate-700 space-y-0.5">
                                    {d.features.map((feature, idx) => (
                                        <li key={idx}>{feature}</li>
                                    ))}
                                </ul>
                            </div>
                        </div>
                    );
                }
                return null;
            };

            return (
                <div className="min-h-screen flex flex-col items-center justify-center p-4">
                    
                    <div className="w-full max-w-xl bg-white rounded-3xl shadow-2xl overflow-hidden border border-slate-100">
                        
                        {/* é ‚éƒ¨æ¨™é¡Œ */}
                        <div className="gradient-header p-8 text-white relative text-center">
                            <span className="inline-block bg-white/20 text-xs px-3 py-1 rounded-full backdrop-blur-sm border border-white/20 mb-3 tracking-wider">
                                2025 æœ€æ–°æ•¸æ“š
                            </span>
                            <h1 className="text-3xl font-black leading-tight mb-1">å°å—æˆ¿å¸‚<br/>æ ¸å¿ƒå ±å‘Š</h1>
                            <p className="text-blue-200 text-sm">å¸‚å€ vs. éƒŠå€ åƒ¹æ ¼æ©Ÿèƒ½å…¨è§£æ</p>
                        </div>

                        {/* åœ–è¡¨å€ */}
                        <div className="p-6">
                            <div className="flex justify-between items-end mb-4 px-2">
                                <h2 className="text-slate-800 font-bold text-lg border-l-4 border-indigo-600 pl-3">
                                    å€åŸŸæˆäº¤åƒ¹ (è¬/åª)
                                </h2>
                                <span className="text-xs text-slate-400 bg-slate-100 px-2 py-1 rounded">æ›´æ–°: 113/11</span>
                            </div>

                            <div className="h-[420px] w-full mb-2">
                                <ResponsiveContainer width="100%" height="100%">
                                    <BarChart 
                                        layout="vertical" 
                                        data={data} 
                                        margin={{ top: 0, right: 45, left: 10, bottom: 0 }}
                                        barSize={24}
                                    >
                                        <CartesianGrid strokeDasharray="3 3" horizontal={true} vertical={false} stroke="#f1f5f9" />
                                        <XAxis type="number" hide domain={[0, 75]} />
                                        <YAxis 
                                            dataKey="name" 
                                            type="category" 
                                            width={85} 
                                            tick={{fontSize: 13, fill: '#334155', fontWeight: 600}} 
                                            axisLine={false}
                                            tickLine={false}
                                        />
                                        <Tooltip content={<CustomTooltip />} cursor={{fill: '#f8fafc'}} />
                                        <Bar dataKey="min" stackId="a" fill="transparent" />
                                        <Bar dataKey="range" stackId="a" radius={[0, 6, 6, 0]}>
                                            {data.map((entry, index) => (
                                                <cell key={`cell-${index}`} fill={entry.fill} />
                                            ))}
                                            <LabelList dataKey="max" position="right" fill="#64748b" fontSize={12} fontWeight="bold" formatter={(val) => `${val}`} />
                                        </Bar>
                                    </BarChart>
                                </ResponsiveContainer>
                            </div>
                            
                            <p className="text-center text-xs text-slate-400 mb-6">ğŸ‘† é»æ“Šé•·æ¢åœ–å¯æŸ¥çœ‹è©³ç´°ç”Ÿæ´»æ©Ÿèƒ½</p>

                            {/* é›™æŒ‰éˆ•å€ */}
                            <div className="space-y-3">
                                {/* æŒ‰éˆ• 1: çœ‹æª”æ¡ˆ (ç¾åœ¨æœƒå¼•å°å»ç¤¾ç¾¤ä¸‹è¼‰) */}
                                <button 
                                    onClick={handleViewReport}
                                    className="w-full bg-white border-2 border-slate-200 hover:border-blue-500 hover:text-blue-600 text-slate-600 font-bold py-4 rounded-xl transition-all active:scale-95 flex items-center justify-center gap-2 group"
                                >
                                    <span className="bg-slate-100 p-1 rounded group-hover:bg-blue-50 transition-colors">ğŸ“„</span>
                                    {REPORT_URL ? "ç€è¦½å®Œæ•´æ•¸æ“šå ±å‘Š (PDF)" : "ä¸‹è¼‰å®Œæ•´ PDF å ±å‘Š"}
                                </button>

                                {/* æŒ‰éˆ• 2: åŠ å…¥ç¤¾ç¾¤ */}
                                <button 
                                    onClick={handleJoinGroup}
                                    className="w-full bg-[#06C755] hover:bg-[#05b54d] text-white font-bold py-4 rounded-xl shadow-lg shadow-green-200 btn-glow transition-all active:scale-95 flex items-center justify-center gap-2"
                                >
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 5.56 2 10.12c0 2.42 1.35 4.58 3.55 6.03-.15.53-.55 1.57-1.13 2.5 0 0-.25.46-.04.57.2.1.53-.1.53-.1s1.77-1.07 2.65-1.84a10.97 10.97 0 0 0 4.44.88c5.52 0 10-3.56 10-8.12C22 5.56 17.52 2 12 2z"/></svg>
                                    åŠ å…¥å®åœ‹åœ°æ”¿ç ”ç©¶é™¢ ç¤¾ç¾¤
                                </button>
                            </div>
                            
                            <p className="text-[10px] text-center text-slate-400 mt-4">
                                Copyright Â© 2025 å®åœ‹åœ°æ”¿ç ”ç©¶é™¢. All rights reserved.
                            </p>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<TainanHousingChart />);
    </script>
</body>
</html>